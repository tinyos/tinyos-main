<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title>The Net2 Protocol Benchmark</title>
<meta name="author" content="Thanh Dang, Kaisen Lin, Chieh-Jan Mike Liang, and Omprakash Gnawali" />
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:date: $Date: 2009-02-03 23:07:32 $
:version: $Revision: 1.12 $
:copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.
*/
body {
  font-family: Times;
  font-size: 16px;
}

.first {
  margin-top: 0 ! important }

.last {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dd {
  margin-bottom: 0.5em }

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.attention, div.caution, div.danger, div.error, div.hint,
div.important, div.note, div.tip, div.warning, div.admonition {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

div.hint p.admonition-title, div.important p.admonition-title,
div.note p.admonition-title, div.tip p.admonition-title,
div.admonition p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em }

div.footer, div.header {
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 0em 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1 {
  font-family: Arial, sans-serif;
  font-size: 20px;
}

h1.title {
 text-align: center;
 font-size: 32px;
}

h2 {
 font-size: 16px;
 font-family: Arial, sans-serif;
}

h2.subtitle {
  text-align: center }

h3 {
 font-size: 12px;
 font-family: Arial, sans-serif;
}

hr {
  width: 75% }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.line-block {
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee;
  border-color: #000000;
  border-width: thin;
  font-size: 14px
}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.option-argument {
  font-style: italic }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

table {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.citation {
  border-left: solid thin gray ;
  padding-left: 0.5ex }

table.docinfo {
  margin: 2em 4em;
}

table.footnote {
  border-left: solid thin black ;
  padding-left: 0.5ex }

td, th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

th.docinfo-name, th.field-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap;
  }

h1 tt, h2 tt, h3 tt, h4 tt, h5 tt, h6 tt {
  font-size: 100% }

tt {}

ul.auto-toc {
  list-style-type: none }


</style>
</head>
<body>
<div class="document" id="the-net2-protocol-benchmark">
<h1 class="title">The Net2 Protocol Benchmark</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="field"><th class="docinfo-name">TEP:</th><td class="field-body">140</td>
</tr>
<tr class="field"><th class="docinfo-name">Group:</th><td class="field-body">Network Working Group</td>
</tr>
<tr class="field"><th class="docinfo-name">Type:</th><td class="field-body">Informational</td>
</tr>
<tr><th class="docinfo-name">Status:</th>
<td>Draft</td></tr>
<tr class="field"><th class="docinfo-name">TinyOS-Version:</th><td class="field-body">&gt; 2.1</td>
</tr>
<tr><th class="docinfo-name">Author:</th>
<td>Thanh Dang, Kaisen Lin, Chieh-Jan Mike Liang, and Omprakash Gnawali</td></tr>
<tr class="field"><th class="docinfo-name">Draft-Created:</th><td class="field-body">12-Jul-2010</td>
</tr>
<tr class="field"><th class="docinfo-name">Draft-Version:</th><td class="field-body">1.1</td>
</tr>
<tr class="field"><th class="docinfo-name">Draft-Modified:</th><td class="field-body">2010-07-12</td>
</tr>
<tr class="field"><th class="docinfo-name">Draft-Discuss:</th><td class="field-body">TinyOS Developer List &lt;tinyos-devel at mail.millennium.berkeley.edu&gt;</td>
</tr>
</tbody>
</table>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">This memo documents a part of TinyOS for the TinyOS Community, and
requests discussion and suggestions for improvements.  Distribution
of this memo is unlimited. This memo is in full compliance with
TEP 1.</p>
</div>
<div class="section" id="abstract">
<h1>Abstract</h1>
<p>The memo describes the metrics, test scenarios, test applications, and
analysis tools for testing collection and dissemination protocols in
TinyOS 2.x. Our goal is to design benchmark suites for network protocols.</p>
</div>
<div class="section" id="introduction">
<h1>1. Introduction</h1>
<p>TinyOS 2.x has a number of collection and dissemination protocols.
Collection is a network-layer best-effort protocol that forms routes
from all the nodes in a network to one or more collection roots or sinks
<a class="footnote-reference" href="#id4" id="id1">[1]</a>. CTP <a class="footnote-reference" href="#id5" id="id2">[2]</a> and MultihopLQI are examples of collection protocols
available in TinyOS 2.x. Dissemination is a network-layer reliable
protocol that provides the eventual delivery of key-value pairs (items) to
all the nodes in a network <a class="footnote-reference" href="#id6" id="id3">[3]</a>. Drip, DIP, and DHV are examples of
dissemination protocols available in the TinyOS 2.x distribution.
Although a large number of mature protocols are available, the community
lacks standard performance tests to evaluate these protocols.</p>
<p>In this document, we describe benchmark suites (i.e., test cases,
scenarios, metrics, and tools) designed with the following two goals.
First, benchmark suites should allow us to systematically compare the
performance of protocols of the same category. Second, benchmark suites
should enable us to quantify the performance difference from the
different versions of a protocol. We hope the community will adopt these
benchmark suites so that the evaluation results from different research
projects can be more meaningfully compared.</p>
</div>
<div class="section" id="the-net2-protocol-benchmark-overview">
<h1>2. The Net2 Protocol Benchmark Overview</h1>
<p>There are two components in the benchmark test cases. First, test cases
need to specify the topologies, scenarios, and protocol parameters to
vary across the experiments. Second, we need to define a set of metrics
to interpret the results and logs collected from running test cases.</p>
</div>
<div class="section" id="definitions">
<h1>3. Definitions</h1>
<p>Target state : target state of the network is the state where all nodes in
the network achieve the collection or dissemination goals. For example, all
data is reported to a sink in collection or data is disseminated to all nodes
in dissemination.</p>
<p>Stable network: Stable network refers to network that is in target state for
a reasonablly long time.</p>
<p>Updating time : For dissemination protocols, this is the duration from the time
the first of a set of items being disseminated until the time all nodes receive
allitems.</p>
<p>Collection time : For collection protocols, this is the duration from the time
the first data is generated to the time all the data is reported to the sinks.</p>
<p>Stabilizing time : Stablizing time refers to the period from the time the network
first reach the target state to the time the amount of control traffic generated
by the network reaches a constant rate and is still in the target state. For
dissemination protocols, stabilizing time is the duration from the last
node receives the disseminated item until the network reaches a stable state.
For collection protocols, this is the duration from any change in the network
topology until the network reaches a target state.
[COMMENT: change in terms of data generated by sensors or link status?]</p>
<p>Testbed topology : This refers to the connectivity graph of a testbed.</p>
<p>Network density : This defines the average number of neighborhood size
in the network.</p>
</div>
<div class="section" id="test-case-topologies">
<h1>4. Test Case Topologies</h1>
<p>To promote experiment repeatability and fair comparisons, the network
topologies MUST remain the same when the same experiment is repeated for
several runs. However, due to the dynamic nature of testbeds, it is
difficult to repeat experiments under the same conditions on testbeds. We
therefore focus on only specifying topologies for simulations in this
document.</p>
<p>Topologies used in simulations can be either created by duplicating
topologies of real-world testbeds or from synthesizing topologies as
outlined later in this section. For testbed topologies, there are
available topologies from  Motelab, Mirage,...?, which can be accessible
at urls..?. For synthesized topologies, experiments SHOULD use the
following topologies.</p>
<ol class="loweralpha simple">
<li>Single-hop star topology</li>
<li>Single-hop clique topology</li>
<li>Multi-hop chain topology</li>
<li>Multi-hop grid topology</li>
<li>Multi-hop random topology</li>
<li>Multi-hop binary tree topology</li>
</ol>
<pre class="literal-block">
             ____                    __ __
 \ | /        /\  /\                  |  |  |
__\|/__      /__\/__\     _ _ _ _     |__|__|             \|/__\
  /|\        \  /\  /                 |  |  |        |\  /
 / | \        \/__\/                  |__|__|              |_\/
   a)           b)           c)          d)            e)

   /\
  /\/\
 /\../\
/\/\/\/\
   f)
</pre>
<p>The network size (total number of nodes) and the network density
(average number of neighbors) can be varied but should remain the same
for the same set of experiments.</p>
<p>The network dynamics, which are defined by the rate at which nodes (e.g.,
unreliable or mobile nodes) join and leave a network MUST also remain
the same for the same set of experiments.</p>
</div>
<div class="section" id="test-case-scenarios">
<h1>5. Test Case Scenarios</h1>
<p>The following scenarios SHOULD be considered in evaluating dissemination
protocols:</p>
<p>Scenario 1: A node disseminates one or more new items to a stable network.
This scenario occurs in practice when a node or a base station reprograms a
network or disseminates events to all nodes in the network.</p>
<p>Scenario 2: A node with old items joins an updated network. This scenario
occurs in practice when one or more items have been disseminated to the network.
However, there are new nodes (eg. mobile nodes moving into the network
region, or intermittent nodes that were off during the dissemination) join
the network.</p>
<p>Scenario 3: Multiple nodes join and leave a network at a specified rate.
This scenario occurs in practice where mobile nodes moving in and out a
region under dissemination.</p>
<p>Scenario 4: Multiple items with different versions are disseminated to
the network from different nodes. This scenario occurs in practice where
multiple users accessing a shared sensing network and commanding the
network to perform different tasks at the same time.</p>
<p>The following scenarios SHOULD be considered in evaluating collection
protocols:</p>
<p>Scenario 1: All nodes periodically generate one data packet in a network
with only one sink. Nodes can start sampling at different time to mimic
deployments where nodes boot at different time instances.</p>
<p>Scenario 2: All nodes periodically generate one data packet in a network
with multiple sinks. This exercises the case where the network leverages
multiple sinks to increase the overall network capacity.</p>
<p>Scenario 3: Multiple nodes join and leave a network at a specified rate.</p>
<p>Scenario 4: Links go down and come up at a specified order and rate.</p>
</div>
<div class="section" id="test-case-parameters">
<h1>6. Test Case Parameters</h1>
<p>There are a number of parameters affecting the performance of collection
and dissemination protocols. Protocol test cases MUST be described
together with the parameters' values. The parameters are organized in
the order of stack layers.</p>
<pre class="literal-block">
+----------------------------------------------------------------------------+
|      Layer      |    Parameter    |    Description     |      Value(s)     |
|                 |                 |                    |                   |
|-----------------+--------------------------------------+-------------------|
| Application     | Item size       | Size of data item  | 2 or 10 bytes     |
|                 |-----------------+--------------------+-------------------|
|                 | Number of items |                    | 2 to 128          |
|                 |-----------------+--------------------+-------------------|
|                 | Number of new   | Number of items    | 2 to 128          |
|                 | items           | to be disseminated |                   |
|-----------------+-----------------+--------------------+-------------------|
| Network layer   | Suppression     | Number of messages | 1, 2, 3           |
|                 | constant        | a node heard before|                   |
|                 |                 | suppressing its own|                   |
|                 |                 | transmission       |                   |
|                 |                 | (trickle-based     |                   |
|                 |                 | protocol only)     |                   |
|-----------------+-----------------+--------------------+-------------------|
| Link layer      | Link quality    | Can be gain, PRR   |                   |
|                 |                 | ETX,...            |                   |
|                 |-----------------+--------------------+-------------------|
|                 | Duty cycle      | Can simply be duty |                   |
|                 | or LPL          | cycle of the nodes |                   |
|                 |                 | or LPL parameters  |                   |
+----------------------------------------------------------------------------+
</pre>
<p>In addition, the following parameters that characterize a network MUST also be
considered.</p>
<pre class="literal-block">
+----------------------------------------------------------------------------+
|   Parameters   |               Description           |      Value(s)       |
|                |                                     |                     |
|----------------+-------------------------------------+---------------------|
| Density        | Can be the average number           | 3,4,5,6 neighbors or|
|                | of neighbors or the average gain    |                     |
|----------------+-------------------------------------+---------------------|
| Network size   | Total number of nodes               |                     |
|                |                                     |                     |
|----------------+-------------------------------------+---------------------|
| Network        | Rates at which nodes are joining    | 1%, 5%, 10%, 15%    |
| Dynamics       | and leaving a network (eg. due to   |                     |
|                | mobility)                           |                     |
+----------------------------------------------------------------------------+
</pre>
</div>
<div class="section" id="running-the-test-cases">
<h1>7. Running the Test Cases</h1>
<p>A complete benchmark requires considering all possible parameter
settings for all network topologies. The total number of test cases is
11,340,000. To remove random factors, each test case SHOULD be repeated
10 times. Hence, the total number of experiments are 113,400,000.</p>
<p>Depending on which metrics are being compared, experimental design
techniques SHOULD be used to reduce the number of experiments.</p>
<p>Each experiment should be ran sufficiently long for the interested
comparison metrics to reach stability. For collection protocols, the stability
could refer to observing stability in the data latency of the whole
network.</p>
<p>While there are various methods of logging the node behavior during
experiments, nodes SHOULD not broadcast any log packets on the radio
until the experiment finishes. Instead, nodes can use the external flash
or dump log data to the serial port, if available.</p>
</div>
<div class="section" id="comparison-metrics">
<h1>8. Comparison Metrics</h1>
<p>The following metrics SHOULD be considered for dissemination protocol
comparisons.</p>
<p>Total number of transmitted messages:</p>
<ul class="simple">
<li>For dissemination protocols, this defines the number of messages
transmitted from the time new items are disseminated to the time the
network is completely updated (or stable in the case of dynamic
network topologies).</li>
<li>For collection protocols, this defines the total number of messages
and acknowledgements exchanged for the entire test case duration.</li>
</ul>
<p>Data latency for a node:</p>
<ul class="simple">
<li>For dissemination protocols, this defines the latency calculated
from the time new items are disseminated or the time the node is
active (whichever later) to the time the node is updated.</li>
<li>For collection protocols, this defines the latency of a payload
calculated from the time it is generated on the node until it is
successfully delivered to any sink.</li>
</ul>
<p>Data latency for the whole network:</p>
<ul class="simple">
<li>For dissemination protocols, this defines the latency calculated
from the time new items are disseminated to the time the network is
completely updated (or stable in dynamic network case).</li>
<li>For collection protocols, this is calculated by averaging the data
latency for each node in the network.</li>
</ul>
<p>Fraction of the network that is updated:</p>
<ul class="simple">
<li>This applies to dissemination protocols only. In the dynamic network
case, it is impossible to achieve 100% of the network updated because
there are always new nodes joining the network and nodes leaving the
network. It is suitable to consider the fraction of the network
(number of updated nodes/total number of nodes) that is updated. This
fraction is measured when it is stable.</li>
</ul>
<p>ROM and RAM usage:</p>
<ul class="simple">
<li>The memory usage of a simple program providing only the
dissemination or collection service.</li>
</ul>
</div>
<div class="section" id="result-analysis-tools">
<h1>9. Result Analysis Tools</h1>
<p>Analysis scripts (eg. python, shell, matlab) are to be developed and
released (in tinyos-2.x/benchmark/tools?)</p>
</div>
<div class="section" id="authors">
<h1>10. Authors</h1>
<div class="line-block">
<div class="line">Thanh Dang</div>
<div class="line">135 FAB, 1900 SW 4th Ave</div>
<div class="line">Portland State University</div>
<div class="line">Portland, OR 97201</div>
<div class="line"><br /></div>
<div class="line">email - <a class="reference external" href="mailto:dangtx&#64;pdx.edu">dangtx&#64;pdx.edu</a></div>
<div class="line"><br /></div>
<div class="line">Kaisen Lin</div>
<div class="line">UCSD</div>
<div class="line">email - <a class="reference external" href="mailto:kaisenl&#64;cs.ucsd.edu">kaisenl&#64;cs.ucsd.edu</a></div>
<div class="line"><br /></div>
<div class="line">Chieh-Jan Mike Liang</div>
<div class="line">213 NEB, 3400 N Charles St</div>
<div class="line">Johns Hopkins University</div>
<div class="line">Baltimore, MD 21211</div>
<div class="line"><br /></div>
<div class="line">email - <a class="reference external" href="mailto:cliang4&#64;cs.jhu.edu">cliang4&#64;cs.jhu.edu</a></div>
<div class="line"><br /></div>
<div class="line">Omprakash Gnawali</div>
<div class="line">S255 Clark Center, 318 Campus Drive</div>
<div class="line">Stanford University</div>
<div class="line">Stanford, CA  94305</div>
<div class="line"><br /></div>
<div class="line">phone - +1 650 725 6086</div>
<div class="line">email - <a class="reference external" href="mailto:gnawali&#64;cs.stanford.edu">gnawali&#64;cs.stanford.edu</a></div>
</div>
</div>
<div class="section" id="citations">
<h1>11. Citations</h1>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>TEP 119: Collection</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>TEP 123: The Collection Tree Protocol (CTP)</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>TEP 118: Dissemination of Small Values</td></tr>
</tbody>
</table>
</div>
</div>
</body>
</html>
